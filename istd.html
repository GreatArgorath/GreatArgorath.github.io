<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ada Baker - ISTD</title>
    <link rel="stylesheet" href="https://use.typekit.net/xke4xzs.css">
    <style>
        /* theme variables */
        :root{
            --bg: #000;
            --text: #fff;
            --overlay-top-alpha: 0.14;
            --overlay-bottom-alpha: 0.06;
            --video-invert: 1; /* 1 = inverted (dark), 0 = normal (light) */
        }
        /* light theme overrides */
        :root.light {
            --bg: #fff;
            --text: #000;
            --overlay-top-alpha: 0.06;
            --overlay-bottom-alpha: 0.03;
            --video-invert: 0;
            --video-hue-rotate: 0deg; /* disable hue-rotate in light mode */
        }
        /* dark theme overrides (explicit) */
        :root.dark {
            --bg: #000;
            --text: #fff;
            --overlay-top-alpha: 0.18;
            --overlay-bottom-alpha: 0.06;
            --video-invert: 1;
            --video-hue-rotate: 180deg; /* keep hue rotate in dark mode */
        }
        /* page layout: header-as-hero with video */
        :root { --header-h: 320px; } /* header height â€” change to taste (e.g. 200-420px) */
        html,body { height:100%; margin:0; }
        body {
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color: var(--text);
            line-height: 1.35;
            letter-spacing: -0.02em;
            background: var(--bg);
        }

        /* header in normal flow (scrolls with the page) */
        header.site-header{
            position: relative;          /* in-flow header (not fixed) */
            height: var(--header-h);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            background: transparent;     /* video will show through */
            border-bottom: 1px solid rgba(0,0,0,0.06);
            overflow: hidden;            /* clip video inside header bounds */
        }
        /* header inner layout */
        .site-brand {
            display:flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            padding: 8px 14px;
        }
        .site-brand h1 {
            margin: 0;
            font-size: 20px;
            line-height: 1;
            letter-spacing: -0.03em;
            font-weight: 700;
        }
        .site-brand .sub {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 2px;
        }

        /* normal page content */
        main.content {
            padding: 18px 18px 64px; /* header occupies its own space in the flow */
            max-width: 900px;
            margin: 0 auto;
        }

        p {
            color: rgb(255, 255, 255);
            font-family: "gothicus", serif;
            font-size: 16px;
            position: relative;
            z-index: 1;
            letter-spacing: normal;
        }
        /* keep original headings usable inside header or content */
        h1 {
            font-size: 48px;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: default;
            line-height: 0.88;
            margin: 0;
        }

        .font2 {
            font-family: "futura-100", sans-serif;
            font-weight: 400;
            font-style: normal;
            letter-spacing: normal;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .bold {
            font-family: "futura-100", sans-serif;
            font-weight: 400;
            font-style: normal;
            
        }

        .italic {
            font-family: "gothicus", serif;
            font-weight: 400;
            font-style: normal;
        }

        h1:hover {
            letter-spacing: -2px;
        }

        .font2:hover {
            
            font-size: 54px;
        }
        
        /* header video container fills header area */
        .header-video {
            position: absolute;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }
        .header-video video {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%,-50%);
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center center;
            min-width: 100%;
            min-height: 100%;
            will-change: transform;
            filter: invert(var(--video-invert)) hue-rotate(var(--video-hue-rotate, 180deg)) contrast(1.05);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        /* optional subtle overlay for legibility */
        .header-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(0,0,0,0.14), rgba(0,0,0,0.06));
            z-index: 1;
            pointer-events: none;
        }
        /* bring the brand content above the video */
        .site-brand { z-index: 2; position: relative; display:flex; align-items:center; gap:10px; }

        /* theme toggle button */
        .theme-toggle {
            --size: 36px;
            width: var(--size);
            height: var(--size);
            display:inline-flex;
            align-items:center;
            justify-content:center;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.06);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            padding: 4px;
            backdrop-filter: blur(4px);
        }
        .theme-toggle:active { transform: scale(0.98); }
    </style>
</head>
<body>
    <!-- fixed header with inline video as header image -->
    <header class="site-header" id="siteHeader" role="banner">
        <div class="header-video" aria-hidden="true">
            <video autoplay muted loop playsinline>
                <source src="https://file.garden/aKXmtMu4gl9vV3YB/authoritariantypefutura_1.mp4" type="video/mp4">
            </video>
        </div>
        <div class="header-overlay" aria-hidden="true"></div>
        <div class="site-brand" aria-label="Site title">
            <!-- theme toggle button -->
            <button id="themeToggle" class="theme-toggle" aria-pressed="false" title="Toggle theme">ðŸŒ™</button>
         </div>
     </header>

    <!-- main scrollable content -->
    <main class="content" role="main">
        <h2 style="margin-top:0; font-size:18px; opacity:.9;">Intro</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <!-- keep the rest of your paragraphs here (unchanged) -->
        <!-- ...existing paragraphs... -->
        <p>... (remaining paragraphs kept) ...</p>
        <img src="https://file.garden/aKXmtMu4gl9vV3YB/ouroborosfull.png" alt="Animated GIF" style="width:100%; margin-top:20px;">
    </main>

    <script>
    // theme toggle + header video parallax + scroll dimming
    (function () {
      const root = document.documentElement;
      const saved = localStorage.getItem('theme'); // 'dark'|'light' or null
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      // initial theme: saved > prefs > default dark
      const initial = saved || (prefersDark ? 'dark' : 'dark');
      root.classList.remove('light','dark');
      root.classList.add(initial);

      // theme toggle UI
      const toggle = document.getElementById('themeToggle');
      function updateToggleUI() {
        const isDark = root.classList.contains('dark');
        toggle.setAttribute('aria-pressed', isDark ? 'true' : 'false');
        toggle.textContent = isDark ? 'ðŸŒ™' : 'â˜€ï¸';
      }
      if (toggle) {
        toggle.addEventListener('click', () => {
          const next = root.classList.contains('dark') ? 'light' : 'dark';
          root.classList.remove('light','dark');
          root.classList.add(next);
          localStorage.setItem('theme', next);
          updateToggleUI();
        });
        updateToggleUI();
      }

      // parallax + dimming
      const header = document.getElementById('siteHeader');
      if (!header) return;
      const vid = header.querySelector('video');
      const overlay = header.querySelector('.header-overlay');
      if (!vid) return;

      vid.playbackRate = 0.7; // slow down video playback for effect

      // compute header top relative to the document (recalc on resize)
      let headerTop = header.getBoundingClientRect().top + window.scrollY;
      const intensity = 0.20; // parallax intensity
      const maxDim = 0.72;    // how much extra darkness to add at max scroll (0..1)
      const maxBrightnessDrop = 0.45; // how much to reduce brightness (0..1)

      function updateHeaderTop() {
        headerTop = header.getBoundingClientRect().top + window.scrollY;
      }

      let ticking = false;
      function update() {
        const scrollY = window.scrollY || window.pageYOffset;
        const scrollPast = scrollY - headerTop; // how far we've scrolled past the header top

        // PARALLAX
        let translateY = scrollPast * intensity;
        const maxOffset = header.offsetHeight * 0.6;
        translateY = Math.max(Math.min(translateY, maxOffset), -maxOffset);
        vid.style.transform = `translate(-50%,-50%) translateY(${translateY.toFixed(2)}px)`;

        // DIMMING: progress 0..1 across the header height (or when header leaves viewport)
        const progress = Math.min(Math.max(scrollPast / header.offsetHeight, 0), 1);

        // update overlay gradient alpha values using CSS var baseline
        if (overlay) {
          const baseTop = parseFloat(getComputedStyle(root).getPropertyValue('--overlay-top-alpha')) || 0.14;
          const baseBottom = parseFloat(getComputedStyle(root).getPropertyValue('--overlay-bottom-alpha')) || 0.06;
          const topAlpha = (baseTop + progress * maxDim).toFixed(3);
          const bottomAlpha = (baseBottom + progress * (maxDim * 0.6)).toFixed(3);
          overlay.style.background = `linear-gradient(180deg, rgba(0,0,0,${topAlpha}), rgba(0,0,0,${bottomAlpha}))`;
        }

        // video brightness + respect theme invert var
        const invertVar = (getComputedStyle(root).getPropertyValue('--video-invert') || '1').trim();
        const hueRotateVar = (getComputedStyle(root).getPropertyValue('--video-hue-rotate') || '180deg').trim();
        const brightness = Math.max(0.2, 1 - progress * maxBrightnessDrop);
        vid.style.filter = `invert(${invertVar}) hue-rotate(${hueRotateVar}) contrast(1.05) brightness(${brightness.toFixed(3)})`;

        ticking = false;
      }

      function onScroll() {
        if (!ticking) {
          window.requestAnimationFrame(update);
          ticking = true;
        }
      }

      // init & listeners
      updateHeaderTop();
      update();
      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', () => { updateHeaderTop(); update(); });
    })();
    </script>
 </body>
 </html>
