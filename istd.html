<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Authoritarian Type</title>
  <link rel="stylesheet" href="https://use.typekit.net/xke4xzs.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <style>
    html,body { height: 100%; margin: 0; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #ffffff; color: #fff; }

    /* Hero section contains the videos so they scroll with the page */

    *::selection { background: rgba(0, 0, 0, 0.99); color: #fff; }
    .hero {
      position: relative;
      z-index: 1;
      min-height: 100vh; /* occupies the first screen */
      display: flex;
      align-items: flex-end; /* place children at bottom */
      justify-content: center;
      text-align: center;
      padding: 1rem;
      overflow: hidden; /* hide video overflow while it scrolls out */
      background: transparent;
    }

    /* Videos now positioned inside the hero and move as the user scrolls */
    .video-bg--base {
      position: absolute;
      inset: 0; /* top:0; right:0; bottom:0; left:0; */
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
      pointer-events: none;
    }

    .video-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: auto;
      height: auto;
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
      z-index: 0;
      pointer-events: none;
      mix-blend-mode: normal;
    }

    .hello {
      position: relative;
      z-index: 2;
      font-size: clamp(1.5rem, 6vw, 4rem);
      text-shadow: 0 2px 12px rgba(0,0,0,0.6);
      background: rgba(0,0,0,0.25);
      padding: 0.5rem 1rem;
      border-radius: 6px;
    }

    /* Additional content below the fold */
    .more {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      padding: 4rem 2rem;
      color: #000000;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.5));
    }

    .card {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0);
      padding: 1.5rem;
      border-radius: 8px;
      
    }

    /* scroll indicator (arrow) */
    .hero-content {
      position: relative;
      z-index: 2;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end; /* push children to the bottom of the hero */
      padding-bottom: 32px;     /* space from the bottom edge */
    }

    .scroll-indicator {
      position: absolute;
      bottom: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: transparent; /* no circle */
      border-radius: 0;
      border: none;
      cursor: pointer;
      pointer-events: auto;
      transition: transform .18s ease;
    }

    .scroll-indicator:hover { transform: scale(1.2); }

    .scroll-indicator:active { transform: translateY(2px); }

    /* animate the inner SVG so the button's transform can still be applied on hover */
    .scroll-indicator svg {
      width: 280px;
      height: 100px;
      stroke: rgba(127, 67, 71, 1);
      stroke-width: 2;
      fill: none;
      display: block;
      animation: bounce 5s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50%     { transform: translateY(8px); }
    }

    /* accessible visually-hidden text */
    .sr-only {
      position: absolute !important;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    /* small top-left label on the first slide */
    .site-tag {
      font-family: "futura-100", sans-serif;
      font-weight: 400;
      font-style: normal;
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 3;
      font-size: 1.5rem;
      line-height: 1;
      color: #000000;
      
      padding: 6px 10px;
      border-radius: 6px;
      pointer-events: none;
      
    }

    @media (max-width: 700px) {
      .video-overlay { object-position: center top; }
      .card { margin: 1rem; }
    }

    /* Timeline layout and appearance */
    .more-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      gap: 2rem;
      align-items: flex-start;
    }

    .timeline {
      width: 160px;
      position: sticky;
      top: 120px;
      align-self: start;
      height: calc(100vh - 140px);
      flex: 0 0 160px;
    }

    .timeline .rail {
      position: relative;
      height: 100%;
      padding-left: 0; /* labels will be offset explicitly so dots sit left of the text */
    }

    .timeline .line {
      position: absolute;
      left: 28px; /* move the vertical rail closer to the left edge */
      top: 8px;
      bottom: 8px;
      width: 4px;
      background: #e6e6e6;
      border-radius: 2px;
    }

    .timeline .progress {
      position: absolute;
      left: 28px; /* match the line position */
      top: 8px;
      width: 4px;
      background: rgba(127,67,71,1);
      border-radius: 2px;
      height: 0%;
      transition: height 220ms linear;
    }

    .timeline ul {
      list-style: none;
      margin: 0;
      padding: 0;
      position: relative;
      z-index: 2;
    }

    .timeline li {
      height: 160px;
      display: flex;
      align-items: center;
      position: relative;
    }

    .timeline .dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
      border: 3px solid #ddd;
      position: absolute;
      left: 30px; /* place dot directly over the vertical line */
      transform: translateX(-50%); /* keep it centered on the line */
      transition: transform .2s ease, background .2s ease, border-color .2s ease, width .2s ease, height .2s ease, border .2s ease;
      box-sizing: border-box;
      cursor: pointer;
    }

    .timeline .dot:hover {
      transform: translateX(-50%) scale(1.5);
      border: 2px solid #ddd;
    }

    .timeline .dot.active {
      background: rgba(127,67,71,1);
      border-color: rgba(127,67,71,1);
      transform: translateX(-50%) scale(1.15);
    }

    .timeline .label {
      margin-left: 56px; /* push labels to the right so they no longer overlap the dots */
      font-family: "Space Mono", monospace;
      color: #111;
      font-weight: 700;
      font-size: 0.95rem;
      transition: all .2s ease;
    }

    .timeline .label:hover {
      transform: translateX(5%) scale(1.1);
      cursor: pointer;
    }

    .card.content {
      flex: 1 1 auto;
      max-width: 820px;
      background: transparent;
      padding: 0 0 4rem 0;
    }

    .card .era {
      padding: 48px 0;
      border-bottom: 1px solid rgba(0,0,0,0.06);
      min-height: 320px;
    }
    /* two-column layout for image + text inside an era */
    .card .era .era-row {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
    }
    .card .era .era-row .era-text {
      flex: 1 1 auto;
    }
    .card .era .era-row .era-image {
      /* larger image on wider viewports */
      flex: 0 0 480px;
      max-width: 70%;
    }
    .card .era .era-row .era-image img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 8px;
    }
    @media (max-width: 900px) {
      .card .era .era-row { flex-direction: column; }
      .card .era .era-row .era-image { max-width: 100%; flex: 0 0 auto; }
    }

    .card .era h3 {
      margin: 0 0 12px 0;
      color: #222;
      font-size: 1.5rem;
    }
    
    .card .era p {
      font-family: "Space Mono", monospace;
      font-weight: 400;
      font-style: normal;
      color: #333;
      line-height: 1.6;
    }

    /* fade-in children as their era scrolls into view */
    .card .era > * {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
      will-change: auto;
    }
    /* small stagger so image/title/paragraphs appear sequentially */
    .card .era.visible > *:nth-child(1) { transition-delay: 0s; }
    .card .era.visible > *:nth-child(2) { transition-delay: 0.06s; }
    .card .era.visible > *:nth-child(3) { transition-delay: 0.12s; }
    .card .era.visible > *:nth-child(4) { transition-delay: 0.18s; }
    /* era header banner */
.card .era .era-header {
  width: 100%;
  min-height: 220px;          /* adjust height as needed */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 8px 8px 0 0;
  margin-bottom: 1rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

/* optional: darker overlay for text readability if you place text over the banner */
.card .era .era-header::after {
  content: "";
  display: block;
  width: 100%;
  height: 100%;
  background: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.15));
  border-radius: inherit;
  position: relative;
  top: -100%;
  pointer-events: none;
}

    @media (max-width: 900px) {
      .more-inner { flex-direction: column; }
      .timeline { display: none; }
    }
  </style>
</head>
<body>

    </div>
    <div id="cursor" class="Cursor">
    </div>
    <!-- First-screen hero (videos are inside so they scroll away like slides) -->
    <main class="hero">
    <!-- small identifying text in the top-left of the hero -->
    <div class="site-tag">ada baker - ISTD project - WIP</div>

    <!-- Base background video (fills the hero and scrolls with it) -->
    <video id="baseVideo" class="video-bg--base" autoplay muted loop playsinline poster="videos/poster.jpg" aria-hidden="true">
      <source src="https://file.garden/aKXmtMu4gl9vV3YB/paperbackground.mp4" type="video/mp4">
    </video>

    <!-- Overlay WebM with alpha (transparency) placed over the base and also scrolls away -->
    <video id="overlayVideo" class="video-overlay" loop muted autoplay playsinline preload="auto" aria-hidden="true"></video>

    <div class="hero-content">
      

      <!-- scroll indicator: click scrolls down one viewport; also serves as visual hint -->
      <button class="scroll-indicator" aria-label="Scroll down" onclick="window.scrollBy({ top: window.innerHeight, behavior: 'smooth' })">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <polyline points="6 9 12 15 18 9" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="sr-only">Scroll down</span>
      </button>
    </div>
  </main>

  <!-- More content below the fold — scroll to move the hero (and videos) up -->
  <section class="more">
    <div class="more-inner">
      <nav class="timeline" aria-hidden="false" aria-label="Era timeline">
        <div class="rail" role="presentation">
          <div class="line"></div>
          <div class="progress" id="timelineProgress" style="height:0%"></div>
          <ul>
            <li data-era="italian">
              <div class="dot" data-target="italian"></div>
              <div class="label">Italian fascists</div>
            </li>
            <li data-era="nazi">
              <div class="dot" data-target="nazi"></div>
              <div class="label">Nazi Germany</div>
            </li>
            <li data-era="british">
              <div class="dot" data-target="british"></div>
              <div class="label">British fascist movements</div>
            </li>
            <li data-era="maga">
              <div class="dot" data-target="maga"></div>
              <div class="label">MAGA</div>
            </li>
          </ul>
        </div>
      </nav>

      <div class="card content" id="contentCard">
        <section class="era" id="italian" data-era="italian" tabindex="0">
           <img src="https://file.garden/aKXmtMu4gl9vV3YB/italianfascists.jpg"
       alt="Italian Fascists" loading="lazy" style="width:100%;height:auto;display:block;border-radius:8px 8px 0 0;">
          <p>The Italian Fascists were a far-right political movement that emerged in Italy in the early 20th century, led by Benito Mussolini.</p>
          <p>Their propaganda design featured a fascinating contrast in where they decided to use each style of type.</p>

          <div class="era-row">
            <div class="era-text">
              <p>Within their main print propaganda, they featured large, mordern geometric type, signalling a forward looking approach to ruling.</p>
              <img src="https://file.garden/aKXmtMu4gl9vV3YB/rometype.jpg" style="width:100%">
              <p>In contrast, their monuments used a more traditional roman serif typeface, presenting <br>a sense of permanence<br>and authority.</p>
              <img src="https://file.garden/aKXmtMu4gl9vV3YB/FRY38-550.jpeg" style="width:100%">
            </div>
            <div class="era-image">
              <img src="https://file.garden/aKXmtMu4gl9vV3YB/sisisi2.jpg"
                   alt="Detail — Italian design sample" loading="lazy">
              <img src="https://file.garden/aKXmtMu4gl9vV3YB/manifesto-mostra-1932.jpg" style="width:95%">
              <p>This paradox is at the centre of lots of authoritarian type, and at the centre of most fascist movements.</p>
            </div>
          </div>
          <br />
          <img src="https://file.garden/aKXmtMu4gl9vV3YB/243039.jpg" style="width: 95%">
          <img src="https://file.garden/aKXmtMu4gl9vV3YB/fascistupclose.jpg" style="width: 95%">
         </section>

        <section class="era" id="nazi" data-era="nazi" tabindex="0">
          
          <div class="era-header-img-wrap">
  <img src="https://file.garden/aKXmtMu4gl9vV3YB/nazigermany.jpg"
       alt="Nazi Germany" loading="lazy" style="width:100%;height:auto;display:block;border-radius:8px 8px 0 0;">
       <p>Content for Nazi Germany. Replace with the actual copy and assets for this era.</p>
</div>
        </section>

        <section class="era" id="british" data-era="british" tabindex="0">
          <img src="https://file.garden/aKXmtMu4gl9vV3YB/britishfascists.jpg"
       alt="British Fascists" loading="lazy" style="width:100%;height:auto;display:block;border-radius:8px 8px 0 0;">
          <p>Content for British fascist movements. Replace this placeholder with your material.</p>
          

        <section class="era" id="maga" data-era="maga" tabindex="0">
          <img src="https://file.garden/aKXmtMu4gl9vV3YB/magamovement.jpg"
       alt="Maga Movement" loading="lazy" style="width:100%;height:auto;display:block;border-radius:8px 8px 0 0;">
          <p>Content for MAGA. Replace with your project content.</p>
         
        </section>
      </div>
    </div>
  </section>

  <script>

    function supportsHEVCAlpha() {
      const navigator = window.navigator;
      const ua = navigator.userAgent.toLowerCase()
      const hasMediaCapabilities = !!(navigator.mediaCapabilities && navigator.mediaCapabilities.decodingInfo)
      const isSafari = ((ua.indexOf('safari') != -1) && (!(ua.indexOf('chrome')!= -1) && (ua.indexOf('version/')!= -1)))
      return isSafari && hasMediaCapabilities
    }

    const player = document.getElementById('overlayVideo');
    player.src = supportsHEVCAlpha() ? 'https://file.garden/aKXmtMu4gl9vV3YB/authoritariantypefutura.mov' : 'https://file.garden/aKXmtMu4gl9vV3YB/authoritariantypefutura.webm';

    const overlay = document.getElementById('overlayVideo');
    const base = document.getElementById('baseVideo');

    const overlaySpeed = 0.8;
    const baseSpeed = 1.2;

    overlay.addEventListener('loadedmetadata', () => { overlay.playbackRate = overlaySpeed; });
    if (overlay.readyState >= 1) overlay.playbackRate = overlaySpeed;

    base.addEventListener('loadedmetadata', () => { base.playbackRate = baseSpeed; });
    if (base.readyState >= 1) base.playbackRate = baseSpeed;

    // Timeline interaction: highlight active dot and advance the progress bar as user scrolls
    (function () {
      const sections = Array.from(document.querySelectorAll('.card.content .era'));
      if (!sections.length) return;

      const dots = Array.from(document.querySelectorAll('.timeline .dot'));
      const progress = document.getElementById('timelineProgress');

      // Use viewport-position logic (rAF) rather than IntersectionObserver
      // This picks the section whose center is nearest a stable reference line,
      // avoiding rapid toggles when two sections are both partly visible.
      const referenceY = () => window.innerHeight * 0.2; // stable reference (20% from top)

      let ticking = false;
      function updateActive() {
        // choose section with center closest to referenceY
        let bestIdx = 0;
        let bestDist = Infinity;
        sections.forEach((s, i) => {
          const r = s.getBoundingClientRect();
          const center = r.top + r.height / 2;
          const dist = Math.abs(center - referenceY());
          if (dist < bestDist) { bestDist = dist; bestIdx = i; }
        });

        const activeId = sections[bestIdx].id;
        dots.forEach(d => d.classList.toggle('active', d.dataset.target === activeId));

        // update progress so it reaches the active dot center (in px)
        const line = document.querySelector('.timeline .line');
        if (line && progress && dots[bestIdx]) {
          const lineRect = line.getBoundingClientRect();
          const dotRect = dots[bestIdx].getBoundingClientRect();
          const dotCenterY = dotRect.top + (dotRect.height / 2);
          let heightPx = dotCenterY - lineRect.top;
          const maxH = lineRect.height;
          if (heightPx < 0) heightPx = 0;
          if (heightPx > maxH) heightPx = maxH;
          progress.style.height = heightPx + 'px';
        } else {
          // fallback: proportional height
          const total = Math.max(sections.length - 1, 1);
          const pct = (bestIdx / total) * 100;
          progress.style.height = pct + '%';
        }

        // Progressive per-line reveal (reversible):
        // For each child element inside each era compute how much of that
        // child is visible in the viewport and set opacity/translate accordingly.
        // A small stagger (transitionDelay) gives a "line-by-line" feel.
        sections.forEach((s) => {
          const children = Array.from(s.children);
          children.forEach((el, ci) => {
            const r = el.getBoundingClientRect();
            // visible height of the element inside viewport
            const visibleH = Math.max(0, Math.min(r.bottom, window.innerHeight) - Math.max(r.top, 0));
            const ratio = (r.height > 0) ? (visibleH / r.height) : ((r.top < window.innerHeight && r.bottom > 0) ? 1 : 0);
            // small easing so the fade looks smooth (you can tune exponent)
            const eased = Math.pow(Math.max(0, Math.min(1, ratio)), 0.95);
            // keep a faint "bottom of fade" always visible when element is entering
            const minVisible = 0.06;
            const opacity = Math.max(minVisible, eased);
            const translateY = (1 - eased) * 18; // matches CSS translate amount
            el.style.opacity = opacity;
            el.style.transform = `translateY(${translateY}px)`;
            // stagger so children appear line-by-line (80ms per item)
            el.style.transitionDelay = `${ci * 80}ms`;
          });
        });
 
         ticking = false;
       }
 
      function onScroll() {
        if (!ticking) {
          ticking = true;
          requestAnimationFrame(updateActive);
        }
      }

      window.addEventListener('scroll', onScroll, { passive: true });
      window.addEventListener('resize', () => requestAnimationFrame(updateActive));
      // initial sync
      requestAnimationFrame(updateActive);

      // (no IntersectionObserver needed)

      // helper retained for accessibility / keyboard focus changes:
      sections.forEach((s) => {
        s.addEventListener('focus', () => {
          // on keyboard focus, snap timeline to that section immediately
          const idx = sections.indexOf(s);
          if (idx >= 0) {
            const dotId = s.id;
            dots.forEach(d => d.classList.toggle('active', d.dataset.target === dotId));
            const line = document.querySelector('.timeline .line');
            if (line && progress && dots[idx]) {
              const lineRect = line.getBoundingClientRect();
              const dotRect = dots[idx].getBoundingClientRect();
              const dotCenterY = dotRect.top + (dotRect.height / 2);
              let heightPx = dotCenterY - lineRect.top;
              const maxH = lineRect.height;
              if (heightPx < 0) heightPx = 0;
              if (heightPx > maxH) heightPx = maxH;
              progress.style.height = heightPx + 'px';
            }
          }
        }, { passive: true });
      });
       // allow clicking labels/dots to jump to section
       document.querySelectorAll('.timeline li').forEach(li => {
         li.addEventListener('click', () => {
           const target = li.getAttribute('data-era');
           const el = document.getElementById(target);
           if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
         });
       });
 
     })();
  </script>
</body>
</html>